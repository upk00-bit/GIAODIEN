<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Loto Ticket</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .grid-9 {
      display: grid;
      grid-template-columns: repeat(9, 1fr);
      gap: 4px;
    }
    .cell {
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      border-radius: 6px;
      cursor: pointer;
    }
    .cell.empty {
      background: transparent;
      cursor: default;
    }
    .cell.selected {
      background: #facc15;
      color: #000;
    }
  </style>
</head>

<body class="bg-gray-100 p-4">

<h1 class="text-xl font-bold mb-3">üéüÔ∏è Ch·ªçn Ticket</h1>

<div id="ticketButtons" class="grid grid-cols-4 gap-2 mb-4"></div>

<div id="ticketArea" class="bg-white p-4 rounded-xl shadow hidden">
  <div class="flex justify-between items-center mb-2">
    <h2 id="ticketTitle" class="font-bold"></h2>
    <span id="kinhBadge" class="hidden px-2 py-1 text-xs font-black bg-red-500 text-white rounded">
      KINH!
    </span>
  </div>

  <div id="ticketGrid" class="grid-9"></div>
</div>

<script>
/* =========================
   DATA
========================= */

const colors = [
  "orange","yellow","pink","red",
  "green","blue","brown","purple"
];

const tickets = [];
let currentTicket = null;

/* =========================
   GENERATE TICKETS
========================= */

function randomPick(arr, n) {
  return [...arr].sort(() => 0.5 - Math.random()).slice(0, n);
}

function generateTicket(id, color) {
  const grid = [];

  for (let row = 0; row < 9; row++) {
    const rowCells = Array(9).fill(null);
    const cols = randomPick([...Array(9).keys()], 5);

    cols.forEach(col => {
      const min = col === 8 ? 80 : col * 10;
      const max = col === 8 ? 90 : col * 10 + 9;
      rowCells[col] = Math.floor(Math.random() * (max - min + 1)) + min;
    });

    grid.push(rowCells);
  }

  return { id, color, grid };
}

/* 16 tickets */
colors.forEach(color => {
  tickets.push(generateTicket(`${color}-1`, color));
  tickets.push(generateTicket(`${color}-2`, color));
});

/* =========================
   UI
========================= */

const btnWrap = document.getElementById("ticketButtons");
const gridWrap = document.getElementById("ticketGrid");
const area = document.getElementById("ticketArea");
const title = document.getElementById("ticketTitle");
const kinh = document.getElementById("kinhBadge");

tickets.forEach(t => {
  const btn = document.createElement("button");
  btn.className = `py-2 rounded text-white font-bold bg-${t.color}-500`;
  btn.textContent = t.id;
  btn.onclick = () => loadTicket(t);
  btnWrap.appendChild(btn);
});

function loadTicket(ticket) {
  currentTicket = ticket;
  gridWrap.innerHTML = "";
  kinh.classList.add("hidden");

  title.textContent = `Ticket ${ticket.id}`;
  area.classList.remove("hidden");

  ticket.grid.forEach((row, r) => {
    row.forEach((num, c) => {
      const cell = document.createElement("div");
      if (num === null) {
        cell.className = "cell empty";
      } else {
        cell.className = "cell bg-gray-200";
        cell.textContent = num;
        cell.onclick = () => {
          cell.classList.toggle("selected");
          checkKinh(r);
        };
      }
      gridWrap.appendChild(cell);
    });
  });
}

function checkKinh(rowIndex) {
  const start = rowIndex * 9;
  const rowCells = [...gridWrap.children].slice(start, start + 9);
  const selected = rowCells.filter(c => c.classList.contains("selected")).length;

  if (selected === 5) {
    kinh.classList.remove("hidden");
  }
}
</script>

</body>
</html>
